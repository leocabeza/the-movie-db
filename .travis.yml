language: node_js
cache:
  directories:
    - node_modules
node_js:
  # bumped because of https://github.com/semantic-release/semantic-release/issues/1300
  - "12"
before_install:
  - echo "//registry.npmjs.org/:_authToken=\${NPM_AUTH_TOKEN}" > .npmrc
script:
  - npm run build
before_deploy:
  - npm install -g semantic-release@17
deploy:
  - provider: script
    script:
      - semantic-release
    on:
      branch: master
